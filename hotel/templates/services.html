<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if user.is_staff %}Услуги - Панель менеджера{% else %}Услуги гостиницы{% endif %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.16.26/dist/css/uikit.min.css" />
</head>
<body>
    <nav class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <a class="uk-navbar-item uk-logo" href="{% if user.is_staff %}{% url 'home' %}{% else %}{% url 'login' %}{% endif %}">Гостиница</a>

            {% if user.is_staff %}
            <ul class="uk-navbar-nav">
                <li><a href="{% url 'manager_clients' %}">Клиенты</a></li>
                <li class="uk-active"><a href="{% url 'services' %}">Услуги</a></li>
                <li><a href="{% url 'manager_rooms' %}">Номера</a></li>
                <li><a href="{% url 'manager_book_service' %}">Запись на услугу</a></li>
            </ul>
            {% endif %}
        </div>
        <div class="uk-navbar-right">
            {% if user.is_authenticated %}
                <span class="uk-margin-right">{% if user.is_staff %}Менеджер: {% endif %}{{ user.username }}</span>
                <a href="{% url 'logout' %}" class="uk-button uk-button-default">Выйти</a>
            {% else %}
                <a href="{% url 'login' %}" class="uk-button uk-button-primary">Войти</a>
            {% endif %}
        </div>
    </nav>

    <div class="uk-container uk-margin-top">
        <h1>{% if user.is_staff %}Услуги гостиницы{% else %}Услуги нашей гостиницы{% endif %}</h1>

        {% if user.is_staff %}
        <form class="uk-margin-bottom" method="get">
            <div class="uk-inline uk-width-1-1">
                <span class="uk-form-icon" uk-icon="icon: search"></span>
                <input class="uk-input" type="text" name="search" value="{{ search_query }}" placeholder="Поиск услуг...">
            </div>
            <button class="uk-button uk-button-primary uk-margin-small-top" type="submit">Найти</button>
            {% if search_query %}
            <a href="{% url 'services' %}" class="uk-button uk-button-default uk-margin-small-top">Сбросить поиск</a>
            {% endif %}
        </form>
        {% endif %}

        <div class="uk-grid-match uk-child-width-1-3@m" uk-grid>
            {% for service in services %}
            <div>
                <div class="uk-card uk-card-default uk-card-hover uk-card-body">
                    <h3 class="uk-card-title">{{ service.name }}</h3>
                    <p class="uk-text-lead">{{ service.price }} руб.</p>
                    <p>{{ service.description }}</p>
                </div>
            </div>
            {% empty %}
            <div class="uk-alert-warning" uk-alert>
                <p>{% if search_query %}Услуги по запросу "{{ search_query }}" не найдены{% else %}Услуги временно недоступны{% endif %}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/uikit@3.16.26/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.16.26/dist/js/uikit-icons.min.js"></script>
</body>
</html>